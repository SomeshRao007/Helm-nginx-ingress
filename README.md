# Helm-nginx-ingress

Introduction
The goal was to deploy a custom nginx-ingress with Helm in a local Kubernetes environment on Ubuntu. The custom deployment was named infra-nginx-ingress-trial and configured to expose ingresses with specific annotations only.

Steps Undertaken
Prerequisites Installation
First, I made sure both Helm and kubectl were installed and the Kubernetes environment was set up on my Ubuntu system.

### Install Helm
~~~
curl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bash
~~~

### Install kubectl

~~~
sudo snap install kubectl --classic
~~~

Downloading the nginx-ingress Chart: I fetched the latest version of the nginx-ingress chart from the official Helm repository to my local environment.

~~~
helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx
helm repo update
helm fetch ingress-nginx/ingress-nginx --untar
~~~

Customizing Values
I created a custom-values.yaml file by copying original file, to ensure nginx-ingress would only watch ingresses with a specific annotation (nginx-trial) and named the deployment infra-nginx-ingress-trial.

in custom-values.yaml:

--> changes were made in controller block, admissionwebhooks block and in service block   

  
### Deploying the Chart

~~~
helm install infra-nginx-ingress-trial ./ -f custom-values.yaml
~~~

## Error Encountered

I faced an error during deployment indicating that the generated name for the service exceeded 63 characters. Despite my customization efforts, the fullnameOverride settings seemed not to shorten the generated names adequately.

### Solution
To address the error, I modified the values.yaml file to use the fullnameOverride parameter to directly set a shortened name for the resources generated by the Helm chart.

example:

~~~
controller:
  name: infra-nginx-ingress-trial
  fullnameOverride: infra-nginx
~~~


With this modification, I re-ran the deployment command:

~~~
helm list
helm uninstall infra-nginx-ingress-trial
helm install infra-nginx-ingress-trial ./ -f custom-values.yaml
~~~


Verification
Once deployed, I checked the status of the ingress controller and related services to ensure everything was running properly.

~~~
kubectl get pods -l app.kubernetes.io/name=ingress-nginx -n default
kubectl get svc -l app.kubernetes.io/name=ingress-nginx -n default
~~~

### Conclusion

![Screenshot 2024-08-01 110932](https://github.com/user-attachments/assets/251a9f56-f92f-4e81-b344-de0cf37affb2)

![Screenshot 2024-08-01 121439](https://github.com/user-attachments/assets/a9dce780-c2a0-4b49-a7c1-3a5fb989bfa8)

![Screenshot 2024-08-01 122152](https://github.com/user-attachments/assets/60e66a21-e98b-40bc-bd0e-bcce1bc098b6)

![Screenshot 2024-08-01 122300](https://github.com/user-attachments/assets/f4e5cc13-e774-4685-b58e-8816a7681493)




The custom nginx-ingress was successfully deployed in the local Kubernetes environment, configured to handle ingresses with the specified annotation, and I resolved the naming issue by implementing fullnameOverride in the Helm chart values.
